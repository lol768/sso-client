<?xml version="1.0" encoding="UTF-8"?>

<project basedir="." default="deployjar" name="sso-client">

	<target name="init">

		<property file="build.properties"/>
		<property name="srcDir" value="src" />
		<property name="buildDir" value="build" />
		<property name="buildName" value="sso-client" />
		<property name="jarFile" value="dist/${buildName}-${version}.jar"/>
		
		<path id="project.classpath">
			<fileset dir="external-libs">
				<include name="*.jar"/>
			</fileset>
			<fileset dir="${buildName}-jar/META-INF/lib">
				<include name="*.jar"/>
			</fileset>
		</path>
			
		<path id="run.classpath">
			<pathelement location="${buildDir}/${buildName}-jar"/>
			<pathelement location="external-libs"/>
			<fileset dir="external-libs">
				<include name="*.jar"/>
			</fileset>
		</path>

		<delete file="${jarFile}" />	
		
		<delete dir="${buildDir}" />

		<mkdir dir="${buildDir}/${buildName}-jar/"/>
		
	</target>


	<target name="compile" depends="init">
		
		<javac destdir="${buildDir}/${buildName}-jar" excludes="" includes="" srcdir="${srcDir}" debug="true">
				<classpath refid="project.classpath" />
		</javac>
		<copy todir="${buildDir}/${buildName}-jar">
			<fileset dir="${buildName}-jar">
				<include name="**/*.*" />
			</fileset>
			<fileset dir="${srcDir}">
				<exclude name="**/*.xml"/>
			</fileset>
		</copy>
		
	</target>

	
	<target name="buildjar" depends="compile">
		<jar destfile="${jarFile}" manifest="${buildName}-jar/META-INF/manifest.mf">
			<fileset dir="${buildDir}/${buildName}-jar/" />
		</jar>
	</target>
		

	<target name="deployjar" depends="compile,buildjar">
		<copy file="${jarFile}" todir="/apps/jboss-3.2.7/server/default/deploy/" />
	</target>



</project>