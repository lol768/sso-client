<?xml version="1.0" encoding="UTF-8"?>

<project basedir="." default="deploywar" name="sso-client">

	

	<target name="init">

		<property name="srcDir" value="src" />
		<property name="buildDir" value="build" />
		<property name="buildName" value="sso-client" />
		<property name="warFile" value="dist/${buildName}.war"/>
		<property name="jarFile" value="dist/${buildName}.jar"/>
		
		<path id="project.classpath">
			<fileset dir="external-libs">
				<include name="*.jar"/>
			</fileset>
			<fileset dir="${buildName}/WEB-INF/lib">
				<include name="*.jar"/>
			</fileset>
		</path>

		<delete file="${warFile}" />
		<delete file="${jarFile}" />	
		
		<delete dir="${buildDir}/${buildName}" />
		<delete dir="${buildDir}/${buildName}-jar" />

		<mkdir dir="${buildDir}/${buildName}" />
		<mkdir dir="${buildDir}/${buildName}/WEB-INF/classes" />
		
		<mkdir dir="${buildDir}/${buildName}-jar/"/>

	</target>


	<target name="compile" depends="init">
		<javac destdir="${buildDir}/${buildName}/WEB-INF/classes" excludes="" includes="" srcdir="${srcDir}" debug="true">
			<classpath refid="project.classpath" />
		</javac>
		<copy todir="${buildDir}/${buildName}">
			<fileset dir="${buildName}">
				<include name="**/*.*" />
			</fileset>
			<fileset dir="${srcDir}">
				<include name="**/*.xml"/>
			</fileset>
		</copy>
		
		<javac destdir="${buildDir}/${buildName}-jar" excludes="" includes="" srcdir="${srcDir}" debug="true">
				<classpath refid="project.classpath" />
		</javac>
		<copy todir="${buildDir}/${buildName}-jar">
			<fileset dir="${buildName}-jar">
				<include name="**/*.*" />
			</fileset>
			<fileset dir="${srcDir}">
				<include name="**/*.xml"/>
			</fileset>
		</copy>
	</target>

	<target name="buildwar" depends="compile">
		<war destfile="${warFile}" webxml="${buildDir}/${buildName}/WEB-INF/web.xml">
			<fileset dir="${buildDir}/${buildName}" />
		</war>
	</target>
	
	<target name="buildjar" depends="compile">
		<jar destfile="${jarFile}">
			<fileset dir="${buildDir}/${buildName}-jar/" />
		</jar>
	</target>
	
	<target name="buildwarandjar" depends="buildjar,buildwar"/>

	<target name="deploywar" depends="buildwarandjar">
		<copy file="${warFile}" todir="/apps/jboss-3.2.6/server/default/deploy/" />
	</target>



</project>